## 요구사항

기본적으로 1부터 9까지 서로 다른 수로 이루어진 3자리의 수를 맞추는 게임이다.

- 같은 수가 같은 자리에 있으면 스트라이크, 다른 자리에 있으면 볼, 같은 수가 전혀 없으면 낫싱이란 힌트를 얻고, 그 힌트를 이용해서 먼저 상대방(컴퓨터)의 수를 맞추면 승리한다.
  - 예) 상대방(컴퓨터)의 수가 425일 때
    - 123을 제시한 경우 : 1스트라이크
    - 456을 제시한 경우 : 1볼 1스트라이크
    - 789를 제시한 경우 : 낫싱
- 위 숫자 야구 게임에서 상대방의 역할을 컴퓨터가 한다. 컴퓨터는 1에서 9까지 서로 다른 임의의 수 3개를 선택한다. 게임 플레이어는 컴퓨터가 생각하고 있는 서로 다른 3개의 숫자를 입력하고, 컴퓨터는 입력한 숫자에 대한
  결과를 출력한다.
- 이 같은 과정을 반복해 컴퓨터가 선택한 3개의 숫자를 모두 맞히면 게임이 종료된다.
- 게임을 종료한 후 게임을 다시 시작하거나 완전히 종료할 수 있다.
- 사용자가 잘못된 값을 입력한 경우 `throw`문을 사용해 예외를 발생시킨후 애플리케이션은 종료되어야 한다.

## 설계

1. 입력

- 숫자 입력
  - 3자리 숫자 입력
  - 검증 후 return
- 게임 재시작 여부 입력
  - 1 or 2

2. 게임 로직

- 사용자 입력 받음
- 결과 도출
- 몇번째 try인지 저장

3. 결과 도출 로직

- 숫자 split 해서 배열로
- 같은 자리 & 같은 숫자면 스트라이크
- 같은 숫자 & 다른 자리면 볼
- 아예 다 다른 숫자면 낫싱

4. 게임 메인 로직

- 정답 숫자 설정
- 게임 로직 실행
- 정답이면 게임 종료
- 게임 종료 후 재시작 여부 입력
- 종료 or 재시작 결정

5. 출력

- 게임 시작 문구 출력
- 각 round 결과 출력
- 게임 종료 결과 출력

6. 검증

- 숫자인가
- 숫자가 서로 다른 3개 숫자로 이루어져있는가
- 각 숫자는 자연수인가
- 게임 재시작 여부 숫자는(1 or 2)인가

## 구현 체크리스트

### InputView(입력)

- [x] 사용자 숫자 입력 받기
- [x] 검증
- [x] 검증 후 return
- [x] 게임 재시작 여부 입력
- [x] 검증
- [x] 검증 후 return

### GameRound(게임 한 라운드)

- [x] 사용자 정답 입력 받음
- [x] 입력된 정답을 바탕으로 결과 도출(Calculator)
- [x] 몇번째 try인지 갱신

### Calculator(결과 도출)

- [x] 숫자 split해서 배열로 나눔
- [x] 아예 다 다른 숫자면 낫싱
- [x] 같은 숫자 & 같은 자리면 스트라이크
- [x] 같은 숫자 & 다른 자리면 볼

### GameController(게임 메인 로직)

- [x] 정답 숫자 설정 후 검증
- [x] 라운드 로직 실행(정답 나올 때까지)
- [x] 3스트라이크 나오면 게임 종료 출력
  - [x] 게임 종료 메세지
  - [x] 몇번 try했는지

### App(실행 메인)

- [x] while(true)로 반복 실행
- [x] GameController 실행
- [x] 재시작 여부 입력 받기
- [x] 결과를 바탕으로 재시작 or 종료
  - [x] 1 입력되면 그대로 true니까 반복 실행
  - [x] 2 입력되면 false로 바꿔서 중단

### OutputView(출력)

- [x] 게임 시작 문구 출력
- [x] 각 round 결과 출력
- [x] 게임 종료 문구 출력(try 횟수도)

### Validator(검증)

- [x] 3자리 숫자 검증
  - [x] 숫자인가
  - [x] 숫자가 서로 다른 3개의 숫자로 이루어져 있는가
  - [x] 이 서로 다른 3개의 숫자는 자연수인가
- [x] 1 or 2 검증
  - [x] 숫자인가
  - [x] 숫자가 1 or 2인가

## 구현 내용

일단 기존 요구사항에서 추가한 부분은 라운드 반복 횟수다. 라운드를 진행하면서 몇번만에 정답을 맞췄는지 나오면 좋을 것 같다고 생각을 하였고, 이에 tryCount를 추가, 출력되도록 하였다.
<br />
그 외의 부분들은 다른 미션과 비슷해서 구현하는데 어렵지 않았다(입출력, 검증) <br />
다만 조금 더 신경쓰게 되었던 부분은 `Controller` 폴더에 있는 내용들이다.<br />

Controller는 크게 3가지로 나뉘는데

1. Calculator -> 정답 숫자와 입력 숫자를 비교하여 결과를 도출해주는 로직
2. GameRound -> 각 round에 대한 로직
3. GameController -> 각 game에 대한 로직

Calculator는 말 그대로 결과를 도출해주는 로직만 들어있기에 제외하고, GameRound, GameController 그리고 진입점이 되는 App만을 설명하는게 좋을 것 같다.

숫자 야구 게임은 입력을 받을 때마다 각 round가 진행되고, 결과가 출력되며 정답을 맞추면 다음 게임이 진행된다. 이 부분에 집중하여 각각에 대한 파일을 나누게 되었다.

### App

App의 경우 진입점에 해당되는 파일이었고, 요구사항을 보니 게임을 시작한다 라는 메세지가 처음에만 등장하고 새 게임을 시작할 때에는 등장하지 않는다는 것을 알게되었다. 따라서 진입점인 App에 게임시작 메세지를 출력하도록 하였다.<br />
처음에는 GameController 에서 게임을 반복시킬 생각이었으나 초반 구현을 하다 보니 GameController에서는 round를 반복시켜야 한다라는 것을 깨닫게 되어 App에서 게임을 반복시키게 되었다.

```js
  async repeatGame() {
    while (true) {
      const gameController = new GameController();
      await gameController.play();
      const answer = await InputView.readStart();
      if (answer === 2) break;
    }
  }
```

나머지 GameController에서도 비슷하게 구성되었지만, 순서는

1. 새 게임 생성
2. 게임 플레이
3. 재시작 여부 입력
4. 입력 결과에 따라 멈춤 or 진행

이렇게 구성되었다.

### GameController

GameController의 경우 내가 평소에 어려워하던 상태를 가진 class를 연습해보는데 도움이 되었다. 일단 시도횟수를 출력하기로 마음을 먹었었고, 해당 game마다 가지게 되는 상태들이 무엇이 있나 생각해보니 정답이 되는 숫자와 시도횟수가 있었다. 따라서 이 둘을 constructor에 넣게 되었다.

Controller의 순서는 다음과 같다.

1. 정답 숫자 생성
2. 새 round 생성
3. 정답 맞출 때까지 round 반복
4. 반복할 때마다 시도횟수 늘리고, 맞추면 멈춤
5. 게임 종료 및 시도횟수 출력

### GameRound

GameRound에서 가지는 상태는 명확하다. 사용자가 입력한 숫자와, 정답 숫자. 각 round마다 사용자가 입력한 숫자는 달라지기에 사용자 입력을 가져와 넣었고, 정답 숫자는 controller에서 정해지기에 거기서 제공된다.

1. 사용자 숫자 입력
2. Calculator 사용하여 결과 도출
3. 결과 출력

이렇게 한 round가 진행된다.

## 추가

onboarding만 풀다가 제대로된 기출은 처음 풀어봤는데 test 통과가 드럽게 안되길래 결국 AI한테 물어봤다... 근데 자세히 보니 ESM으로 되어있길래 레포에 직접 쳐들어가서 다른 버전의 test파일을 가져왔고 또 안되길래 코드 뜯어보다가 요구사항에 있는 라이브러리 API 내용을 보게 되었다.

```
  - Random 값 추출은 `Random.pickNumberInRange()`를 활용한다.
```

나는 `pickNumbersInRange`를 사용했고, 이건 숫자 범위 내에서 지정된 갯수 만큼 겹치지 않는 숫자를 반환하는 방식이었다. 그니까 다른걸 써서 오류가 나고 있었던거다. 왜 오류가 나냐면.... 그니까 나는 이걸 사용해서 3개를 지정해서 가져오고 있는데 원래는 `pickNumberInRange`를 3번 반복 사용해서 가져와야했던거다. 그리고 테스트 코드에서는 배열에 6개의 숫자가 들어가 있어서 6개를 합쳐버린 6자리 숫자가 완성되어서 계속 검증이 안되었었다. 그래서 이 부분 고치고.... 또 재시작 여부 String으로 입력되길래 Number 변환하는거 추가하고 해서 겨우 통과했다. 이번엔 테케 통과에 AI 사용해버렸지만, 현장에서는 사용하면 안되니까 다음번엔 테케 통과에 조금 더 신경써보자.
