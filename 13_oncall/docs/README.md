# 최종 코테 미션

## 요구사항

### 비상 근무일 배정 규칙

- 기본적으로 순번에 따라 비상 근무일을 배정한다.
- 회사에서는 평일과 휴일(토요일, 일요일, 법정공휴일) 비상 근무 순번을 다르게 운영하고 있다.
- 평일 순번과 휴일 순번의 순서는 다를 수 있다.
- 비상 근무자는 평일 순번, 휴일 순번에 각각 1회 편성되어야 한다.
- 근무자 보호와 비상 근무 운영의 효율을 위해, 비상 근무자는 어떤 경우에도 연속 2일은 근무할 수 없다.
  순번상 특정 근무자가 연속 2일 근무하게 되는 상황에는, 다음 근무자와 순서를 바꿔 편성한다.
  예를 들어, 수아가 평일인 목요일에 비상 근무를 서고, 다음 날인 금요일이 휴일이면서 순번상 또다시 수아가 근무해야 할 경우,
  다음 휴일 근무자와 순서를 바꿔서 근무한다.
- 만약에 법정공휴일인 수요일에 수아가 비상 근무를 서고 다음 날 평일 순번이 수아인 경우에는,
  다음 평일 근무자와 순서를 바꿔서 근무한다.
- 비상 근무자 배정 시 다음 근무자와 순서를 바꿔야 하는 경우에는, 앞의 날짜부터 순서를 변경해야 한다.

### 입출력 요구 사항

- 월(숫자)과 시작 요일(일, 월, 화, 수, 목, 금, 토) 정보를 입력받는다.
- 연도는 고려하지 않으며, 매년 2월은 28일까지만 있다고 가정한다.
- 평일 비상 근무 순서를 입력받는다.
- 휴일(토요일, 일요일, 법정공휴일) 비상 근무 순서를 입력받는다.
- 올바르지 않은 입력을 할 경우 [ERROR]로 시작하는 에러 메시지를 출력 후 다시 입력받는다.
- 비상 근무를 배정할 월과 시작 요일의 입력 값이 올바르지 않은 경우, '비상 근무를 배정할 월과 시작 요일'부터 다시 입력받는다.
- 평일 순번 또는 휴일 순번의 입력 값이 올바르지 않은 경우, '평일 순번'부터 다시 입력 받는다.

- 평일이면서 법정공휴일의 경우에만 요일 뒤에 (휴일) 표기를 해야 한다.
- 비상 근무표 출력을 완료하면 프로그램은 종료된다.

### 프로그램 기대값

```
비상 근무를 배정할 월과 시작 요일을 입력하세요> 5,월
평일 비상 근무 순번대로 사원 닉네임을 입력하세요> 준팍,도밥,고니,수아,루루,글로,솔로스타,우코,슬링키,참새,도리
휴일 비상 근무 순번대로 사원 닉네임을 입력하세요> 수아,루루,글로,솔로스타,우코,슬링키,참새,도리,준팍,도밥,고니

5월 1일 월 준팍
5월 2일 화 도밥
5월 3일 수 고니
5월 4일 목 수아
```

## 설계

일단 프로그램 진행 방향을 정리하면 다음과 같다.

### 기본 순서

1. 월, 시작요일 입력 -> 검증
2. 평일 비상근무 순서 입력 -> 검증
3. 주말 비상근무 순서 입력 -> 검증
4. 비상근무 순서 정렬(메인 로직)
5. 결과 출력

그리고 내부에서 하나씩 자세히 살펴보며 Controller의 역할과 순서를 정리해보면 다음과 같다.

### Controller

1. 사용자 입력 -> 검증 -> Calendar 생성
2. 평일 입력 -> 검증 -> Organizer에 저장
3. 주말 입력 -> 검증 -> Organizer에 저장
4. Manager 실행 -> 결과 받아옴 -> 출력

안에 해당되는 하나하나의 역할을 따져보면

### Calendar

1. 월, 요일 정보 받아옴
2. 해당 월의 정보들 정리(객체로)
3. 해당 월의 휴일 확인
4. 휴일이 평일인지 확인(기존 정리된 정보 활용)
5. 평일이면 해당 일의 정보 주말로 변경
6. 휴일 정보에 추가
7. 총 며칠인지 저장
8. 숫자가 입력되면 해당 숫자에 대한 정보 return

### Organizer

1. 근무 순서 저장
2. 직전에 근무한 사람 정보 저장
3. 평일 로직
4. 주말 로직

### Manager

1. 총 며칠인지 가져와서 반복문 생성
2. 주말 or 휴일인지 확인 후 Organizer 로직 실행
3. 근무한 사람 정보 가져와서 결과에 push

### 계층 분리

위의 내용을 역할에 따라 계층 분리하면 다음과 같다.

1. View

- OutputView: 출력
- InputView: 사용자 입력

2. Controller

- Controller: 메인 컨트롤

3. Model

- Calendar: 해당 월의 정보 저장
- Organizer: 근무 순서 저장 및 처리
- Manager: 해당 월 전체의 근무 순서 및 정보 저장

## 구현 체크리스트

### Controller

- [x] Calendar 생성
  - [x] 사용자 월, 요일 입력
  - [x] 검증
  - [x] Calendar 생성
  - [x] initCalendar(월, 요일)
  - [x] 저장
- [x] Organizer 생성
  - [x] 평일 근무순서 입력
  - [x] 검증
  - [x] 주말 근무순서 입력
  - [x] 검증
  - [x] Organizer에 전달하여 생성
  - [x] 저장
- [x] 결과 생성
  - [x] Manager에 Organizer, Calendar 전달하여 생성
  - [x] Manager 실행
  - [x] 결과 받아옴
- [ ] 결과 출력
  - [ ] 결과 가공
  - [ ] OutputView 통해 출력

### Calendar

- [x] initCalendar(월, 요일) 실행
  - [x] 해당 월이 며칠인지 저장
  - [x] 요일에 따라 정보에 {일, 요일, 주말여부} push
- [x] 휴일 처리
  - [x] 해당 월의 휴일 정보 가져옴
  - [x] 그 일에 해당되는 정보 가져옴
  - [x] 주말이면 pass
  - [x] 평일이면 해당 정보 주말로 변경
  - [x] 휴일 정보에 일 push

### Organizer

- [x] 평일 근무 순서 저장
- [x] 주말 근무 순서 저장
- [x] 전날 근무한 사람 저장
- [x] 평일 로직
  - [x] 평일 shift
  - [x] shift한 내용이 전날 근무한 사람이랑 같은지 확인
    - [x] 같으면 추가 shift해서 그 사람 근무자 처리
    - [x] 아까 shift한 내용은 unshift해서 다시 넣음
  - [x] 근무자 이름 변경
  - [x] 평일 push
- [x] 주말 로직(평일과 동일함)

### Manager

- [x] 총 며칠인지(Calendar) 통해 가져옴
- [x] 반복문 생성(main로직)
- [x] 반복문 내부에 들어가는 로직
  - [x] 해당 일이 주말인지 & 휴일인지 확인
  - [x] 주말이면 Organizer 주말로직, 평일이면 평일로직
  - [x] 결과 받아서
  - [x] 휴일이면 요일에 (휴일) 추가
  - [x] 결과 {일, 요일, 이름} push
- [ ] 결과 return

### Validator

- [x] 월 검증
  - [x] 숫자인가
  - [x] 정수인가
  - [x] 1이상 12이하인가
- [x] 요일 검증
  - [x] 요일 목록 안에 있는가
- [ ] 근무 순서 검증
  - [x] 합쳐서 5명 이상 35명 이하인가
  - [x] 각각
    - [x] 중복 있는가
    - [x] 5명 이상 35명 이하인가
    - [x] 각각
      - [x] 한글인가
      - [x] 1이상 5 이하인가

### InputView

- [x] 월, 시작 요일 입력
- [x] 평일 근무 순서 입력
- [x] 주말 근무 순서 입력

### OutputView

- [ ] 근무 정보 출력
